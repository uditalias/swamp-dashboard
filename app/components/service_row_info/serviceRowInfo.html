<div class="service-info padding-2" collapse="!toggleService">

    <div ng-if="toggleService">

        <div class="header flex flex-align-center">
            <div class="flex-6">
                <span class="service-name color-white text-24">{{service.name}}</span>
                <span class="service-description text-16 margin-left-1" ng-if="service.description">{{service.description}}</span>
            </div>
            <div>
                <button class="btn btn-small btn-blue margin-right-1" ng-click="serviceActions.showServiceOutLog(service)" tooltip="Show out log"><i class="fa fa-terminal"></i> Out log</button>
                <button class="btn btn-small btn-red" ng-click="serviceActions.showServiceErrorLog(service)" tooltip="Show error log"><i class="fa fa-terminal"></i> Error log</button>
            </div>
        </div>

        <div class="flex service-info-table flex-vbox margin-top-4 padding-bottom-2">

            <div class="flex service-info-row">

                <div class="flex flex-1 service-info-item margin-right-2 padding-2">
                    <div class="flex-1">Started</div>
                    <div class="flex-1 color-white">{{service.uptime}}</div>
                </div>

                <div class="flex flex-1 service-info-item margin-right-2 padding-2">
                    <div class="flex-1">Service Path</div>
                    <div class="flex-1 color-white text-truncate" tooltip-append-to-body="true" tooltip="{{service.path}}">{{service.path}}</div>
                </div>

                <div class="flex flex-1 service-info-item padding-2">
                    <div class="flex-1">Current Env</div>
                    <div class="flex-1 flex color-white">
                        <div class="flex-1">{{service.runningEnvironment}}</div>
                        <div>
                            <i class="fa fa-list-alt cursor-pointer" popover-append-to-body="true" popover-placement="left"
                               popover="{{(service.environments[service.runningEnvironment]|json)}}"
                               popover-title="Environment variables" popover-trigger="mouseover"></i>
                        </div>
                    </div>
                </div>

            </div>

            <div class="flex service-info-row">

                <div class="flex flex-1 service-info-item margin-right-2 padding-2">
                    <div class="flex-1">Process ID</div>
                    <div class="flex-1 color-white">{{service.pid || '-'}}</div>
                </div>

                <div class="flex flex-1 service-info-item margin-right-2 padding-2">
                    <div class="flex-1">Service Script</div>
                    <div class="flex-1 color-white">{{service.script || '-'}}</div>
                </div>

                <div class="flex flex-1 service-info-item padding-2">
                    <div class="flex-1">Change Env</div>
                    <div class="flex-1 flex-align-center">

                        <div class="dropdown">
                            <a class="dropdown-toggle">
                                {{service.selectedEnvironment || 'Select Environment...'}}
                            </a>
                            <ul class="dropdown-menu">
                                <li ng-repeat="(key,value) in service.environments" ng-click="service.selectedEnvironment = key">
                                    <a>{{key}}</a>
                                </li>
                            </ul>
                        </div>

                        <span class="margin-left-1" ng-if="service.selectedEnvironment != service.runningEnvironment">
                            <a class="color-yellow cursor-pointer" ng-click="serviceActions.restart(service)"><i class="fa fa-refresh"></i> Restart</a>
                        </span>
                    </div>
                </div>

            </div>

        </div>

        <div class="flex monitor-table margin-top-4">

            <div class="flex-1 padding-2 monitor-item">

                <div class="monitor-title flex">
                    <div class="flex-1">Process Memory</div>
                    <div class="color-white">{{service.monitor.memory|number}}b ({{bytesToSize(service.monitor.memory)}}) <span class="text-12 color-warm-grey" tooltip="Total server memory">/ {{totalSwampMemory|number}} ({{bytesToSize(totalSwampMemory)}})</span></div>
                </div>

                <div class="monitor-content memory margin-top-2">
                    <sw-aggregated-data-chart line-color="19B6EE" format-value="formatMemoryValue(value)" max-items="40" min-value="0" max-value="totalSwampMemory" item-css-class="memory-chart-item" ng-model="service.memoryData"></sw-aggregated-data-chart>
                </div>

            </div>

            <div class="flex-1 padding-2 monitor-item">

                <div class="monitor-title flex">
                    <div class="flex-1">Process CPU Usage</div>
                    <div class="color-white">{{service.monitor.cpu|number:2}}%</div>
                </div>

                <div class="monitor-content cpu margin-top-2">
                    <sw-aggregated-data-chart line-color="38B44A" format-value="formatCpuValue(value)" max-items="40" item-css-class="cpu-chart-item" ng-model="service.cpuData"></sw-aggregated-data-chart>
                </div>

            </div>

        </div>

    </div>

</div>